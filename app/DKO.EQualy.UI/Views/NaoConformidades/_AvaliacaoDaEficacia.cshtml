@model DKO.Equaly.DTO.NaoConformidade.Eficacia.EficaciaDto
<div class="row-fluid">
    <div class="span12">
        <h3>Avaliação da eficácia</h3><br />
        @using (Ajax.BeginForm("RegistrarVerificacaoEficacia", "NaoConformidades", new AjaxOptions
        {
            LoadingElementId = "loaderModal", // div with .gif loader - that is shown when data are loading
            OnFailure = "obterResultadoEficaciaError",
            OnSuccess = "obterResultadoEficaciaSuccess",
            HttpMethod = "POST",
        },new{ @id="frmEficacia"}))
        {
            <div class="row-fluid" style="margin-top: 10px;">
                <div class="span12 ">
                    <div class="control-group">
                        <div class="input-append date date-picker" data-date="12-02-2012" data-date-format="dd-mm-yyyy" data-date-viewmode="years">
                            @Html.LabelFor(model => model.DataDeCriacao, new { @class = "control-label" })
                            @Html.TextBoxFor(model => model.DataDeCriacao, new { @class = "m-wrap m-ctrl-medium date-picker", @id = "txtDataConclusao", @readonly = "readonly" })<span class="add-on"><i class="icon-calendar"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12 ">
                    <div class="control-group">
                        @Html.HiddenFor(model => model.NaoConformidadeId)
                        @Html.HiddenFor(model => model.EficaciaId, new { @id = "hfEficaciaId" })
                        @Html.HiddenFor(model => model.Pontuacao, new { @id = "hfPontuacao", @required = "required" })
                        @Html.LabelFor(model => model.Pontuacao, new { @class = "control-label" })
                        <div class="controls" style="margin-top: 15px;" id="divPontuacao">
                            <div id="ratingEficacia"></div>
                            <span id="spanTextoPontuacao" class="span12 m-wrap" style="float: right;margin: -20px -215px 0 0;font-weight: bold;font-size: large"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid" style="margin-top: 10px;">
                <div class="span12 ">
                    <div class="control-group">
                        @Html.LabelFor(model => model.Observacao, new { @class = "control-label" })
                        <div class="controls">
                            @Html.TextAreaFor(model => model.Observacao, new { @class = "span12 m-wrap", @id = "txtNumeroNF", @required = "required", @title = "Obrigatório um comentário em relação a avaliação", @rows = "4" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12 ">
                    <div class="control-group">
                        @*@Html.LabelFor(model => model.NomeArquivo, new { @class = "control-label" })
                            <div class="controls">
                                @Html.TextBoxFor(model => model.NomeArquivo, new { type = "file" })
                            </div>*@
                    </div>
                </div>
            </div>
            <div class="form-actions" style="text-align: right;">
                <button type="button" data-dismiss="modal" class="btn"><i class="m-icon-swapleft"></i> Cancelar</button>
                @if (@Model != null && @Model.EficaciaId <= 0)
                {

                    <button type="submit" class="btn green"><i class="icon-ok"></i> Salvar</button>
                }
                else
                {
                    <button type="submit" class="btn green"><i class="icon-ok"></i> Atualizar</button>
                }
            </div>
        }

        <!-- scripts -->
        <link href="~/Content/assets/plugins/raty/jquery.raty.css" rel="stylesheet" />
        <script src="~/Content/assets/plugins/raty/jquery.raty.js"></script>
        <script src="~/Scripts/NaoConformidade/Eficacia/eficacia.js"></script>
    </div>
</div>